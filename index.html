<!DOCTYPE html>
<html class="dark">
<!-- ************************************************************************
* This page is designed like old-school HTML intended to allow for easy
* downloading and offline use.
* As such, I only link 2 JS, 1 CSS, and use no libraries.
* 
* This is effectively a simple cypher encoder/decoder, but instead of a 1:1
* mapping of text to cypher-text, the encoding is randomized across all
* instances of each character across the cypher. So encrypting the same message
* twice will NOT yield the same cyphertext, but both will decrypt correctly.
*
* This is *NOT* a strong encryption meant to replace AES/DES/RSA/etc...
* It *IS* meant to allow for ad-hoc encryption/decryption.
*
* Click the Help icon for more details and a use case.
************************************************************************ -->

<!-- TODO: make controls switch main panel as a card, rather than a popup -->
<!-- TODO: make a CSV download option that auto-obfuscates the data to make it look like an inventory or other mundane spreadsheet (and allow for upload of that file instead of copy/paste to decrypt) -->

<head>
  <title>CypherBunk 2076 (Simple Encryption for Friends)</title>
  <link rel="stylesheet" href="cypherBunkStyle.css">
  <!-- <script src="keys.js"></script> --> <!-- Link to Static Keys like this -->
  <script src="asciiLogos.js"></script>
  <script src="cypherBunk2076.js"></script>
</head>

<!-- ****************************** BODY ******************************** -->
<body onload="cypherBunk.cacheDom()">
  <div id="content">
    <div id="warningWrap">
      <div id="warning"></div>
    </div>

    <div id="helpWrap">
      <svg id="iconScore" onclick="cypherBunk.calculateScore()" class="icon" viewBox="0 0 113 100"><title>Calculate security score for a message you just encrypted.</title><path fill="currentColor" d="M50.6 3.5L37.9 29.3 9.4 33.5c-5.1 0.7-7.2 7.1-3.5 10.7l20.6 20.1-4.9 28.4c-0.9 5.1 4.5 9 9.1 6.6L56.3 85.9l25.5 13.4c4.6 2.4 9.9-1.5 9.1-6.6l-4.9-28.4 20.6-20.1c3.7-3.6 1.7-9.9-3.5-10.7L74.6 29.3 61.9 3.5C59.6-1.2 52.9-1.2 50.6 3.5zM50"></path></svg>
      <svg id="iconKey" onclick="cypherBunk.cardShow('jsCard')" class="icon" viewBox="0 0 512 512"><title>Get static Javascript keys for more better performance.</title><path fill="currentColor" d="M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"></path></svg>
      <svg id="iconSun" onclick="cypherBunk.toggleDarkUI()" class="icon" viewBox="0 0 512 512"><title>Toggle Dark Mode</title><path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg>
      <svg id="iconHelp" onclick="cypherBunk.cardShow('helpCard')" class="icon" viewBox="0 0 512 512"><title>Show Help Documentation</title><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path></svg>
    </div>

    <div id="keyWrap">
      Cypher Key Url: <input id="keyUrl" />
      &nbsp;&nbsp;&nbsp;&nbsp;-or-&nbsp;&nbsp;&nbsp;
      Full Key Text: <textarea id="keyText"></textarea><br/>
      (Your friends need the exact same key to decrypt)
    <hr/>
    </div>

    <div id="messageWrap">
      <h2>Message:</h2>
      Either type a message to encrypt, or paste an encrypted message to decrypt.<br/>
      <textarea id="message"></textarea>
      <div id="controlWrap">
        <span id="undoWrap"><svg id="iconUndo" onclick="cypherBunk.undo()" class="icon" viewBox="0 0 512 512"><title>Undo Last Encrypt/Decrypt Action</title><path fill="currentColor" d="M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"></path></svg></span>
        <button id="bEncrypt" onclick="cypherBunk.encryptMessage()">Encrypt this Cleartext Message</button>
        <button id="bDecrypt" class="purple" onclick="cypherBunk.decryptMessage()">Decrypt this Cyphertext</button>
      </div>
    </div>
  </div>

  <div id="footer">
    <hr/>
    <span id="version"></span>
    by Rob Bates
  </div>

  <div id="jsCard" class="card invisible">
    <h3>Static Javascript Keys</h3>
    <p>If you're proficient at Javascript, you can download/modify this document to keep pre-computed Cypher Keys. These will perform more quickly, and you can distribute your keys.js to your friends to use the same key.</p>
    <p>If there is no JS code below, close this popup and encrypt something in the main window. Then open this popup again.</p>
    <p>(Note: if you are already using Predefined Keys, we won't re-generate them here)</p>
    <p>Copy the JS code below, put it in a keys.js file, and link to it above this document's &lt;script&gt; tag.</p>
    <p><textarea id="predefinedJS"></textarea></p>
  </div>

  <div id="helpCard" class="card invisible">
    <h3>What is CypherBunk?</h3>
    <p>It offers easy Ad-Hoc encryption for friends.</p>
    <p>You don't have to have PGP keys or some other setup in advance. You can just encrypt the message and tell them what the key is later.</p>

    <h3>How Secure is CypherBunk?</h3>
    <p>If you are looking for strong encryption, you are better off exploring AES/DES/RSA/etc...</p>
    <p>While CypherBunk is weaker, it is much more than a simple 1-to-1 cypher. As long as you use a fairly long key, the encryption is "good enough" for most people. It would take a *LOT* of compute power to be able to crack CypherBunk.</p>
    <p>The easiest way to "crack" CypherBunk is to guess the key. So don't treat the Key like a password. The best cypher keys are ones you could copy and paste from reliably consistent sources.</p>

    <h3>What Key Should I Use?</h3>
    <p>Web Pages that don't change often are great keys, which is why we offer a Key URL option. CypherBunk will fetch that Web Page and use its HTML as your key.</p>
    <p>Linking to eBooks, Dictionaries, Discographies, Glossaries, or other fairly static lists can be a great key.</p>
    <p>Don't link to Dynamic Web Pages. Even a page that displays the current date would break, because if the key changes by even 1 character, the message can no longer be decrypted with that URL.</p>
    <p>If you and your friends regularly use a specific Key URL, you may consider using a URL shortening service like bit.ly, because then you just have to remember the short URL, yet you can have a massive key.</p>

    <h3>Troubleshooting:</h3>
    <p>Can't Fetch Key URL: Some Websites don't allow remote fetching of their content, so you will have to use another site. Libraries like JS or CSS are often good ways around this, because those sites generally WANT you to link to them.</p>
    <p>Decrypts to Weird Characters: Ensure you've pasted the encrypted message properly (CypherBunk will attempt to remove erroneous characters). More often than not, the Key isn't matching.  If you are using a Key URL, the site may have changed its content. If you are using Full Key Text, you may have copied/pasted differently than the person who encrypted the message. Even 1 character different will break the decryption, so ensure you and your friends have agreed upon the key (including leading/trailing spaces or newlines).</p>

    <h3>Use Case:</h3>
    <p>Alice wants to send an encrypted message to Bob, but they don't have access to their personal computers, but have access to something with a simple web-browser.</p>
    <p>Alice accesses this page, types her message, encrypts it with a key that either she and Bob both know, or she could communicate verbally (like a shortened bit.ly link to Lorem Ipsum), and sends the encrypted message to Bob.</p>
    <p>Bob sees the message that just looks like numbers, understands this is a cypher text, and waits to be told what key to use to decrypt it.</p>
    <p>Alice tells Bob to go to a bit.ly link for the key.</p>
    <p>Bob goes to this page, provides the bit.ly link as the decryption key, pastes the encrypted message, and is able to decrypt it successfully.</p>
  </div>

  <div id="scoreCard" class="card invisible">
    <h3>Security Score for last Encryption</h3>
    <p>Encrypt something in the main window first, then click</p>
    <p>
<!-- TODO: style scoreTable -->
      <table id="scoreTable"><thead><tr>
        <th>Score Type</th><th>Score</th><th>Detail</th>
      </tr></thead><tbody><tr>
        <td title="Longer keys reduce numerical patterns, making the cypher harder to crack.">
          Key Length
        </td>
        <td id="score1" title="Was your key long enough?"></td>
        <td id="detail1" title="Ideally your key would be 100,000 characters or more."></td>
      </tr><tr>
        <td title="A complicated long key will give you better diversity, making the cypher harder to crack.">
          Key Diversity
        </td>
        <td id="score2"></td>
        <td id="detail2" title="Ideally your key should generate an average of 1,000 variants for every cypher character."></td>
      </tr><tr>
        <td title="A perfect encryption would have the same number of 0s as 1s and every other digit, making the cypher harder to crack.">
          Homogeneity Simple
        </td>
        <td id="score3"></td>
        <td id="detail3" title="Ranges up to 20% are fine (encrypted message should have roughly equivalent numbers of 0s, 1s, 2s, etc...)"></td>
      </tr><tr>
        <td title="The cypher creates many tokens representing characters. The best encryption would use each token an equal number of times (this score tends to be low, as it is dependent on the message being sent)">
          Homogeneity Complex
        </td>
        <td id="score4" title="On Average, are cypher characters used relatively uniformly."></td>
        <td id="detail4" title="Ranges up to 500% are fine (meaning that the most variants are used about 3x average, and the least common about half of average)."></td>
      </tr></tbody></table>

      <hr/>
<!-- TODO: style score_total to be large and noticeable) -->
      <div id="score_total"></div>
    </p>
  </div>
</body>
</html>